Security Analysis
===

- [Common Definitions](#common-definitions)
    - [Desiderata](#desiderata)
- [Channels](#channels)
    - [Channel Networks](#channel-networks)
- [Sidechains](#sidechains)
- [Plasma](#plasma)
    - [Plasma MVP](#plasma-mvp)
    - [Plasma Cash](#plasma-cash)
    - [Validium](#validium)
- [Rollups](#rollups)
    - [ZK Rollups](#zk-rollups)
    - [Optimistic Rollups](#optimistic-rollups)
        - [Interactive Verification Games](#interactive-verification-games)

This page will provide a comprehensive overview of the security and scalability properties of Fuel as it compares to other so-called "scaling solutions." It argues that Fuel is uniquely positioned in the trade-off space to be the best scaling architecture today.

Common Definitions
---

We must first begin by establishing common definitions for desirable properties in a scaling solution. The following definitions are informal, but sufficiently precise to enable proper discussion on the matter. Note that they apply to both "layer-2" constructions as well as base "layer-1" blockchains.

**Security** Security can be roughly defined as the cost to manipulate history. Example: the security of Proof-of-Work blockchains can be measured as the capex and opex of producing new blocks. The security of Proof-of-Stake blockchains can be measured [as the penalty that can be applied](https://medium.com/@ercwl/proof-of-stake-is-less-wasteful-b2854a191766) if a history re-organization is done.

**Trustless** Trustlessness has two components: [_state liveness_ and _state safety_](https://arxiv.org/abs/1904.06441). State is live if it can be consumed by its owner in finite time (in other words, it cannot be burned/locked forever), and safe if it cannot be consumed by its non-owners ever (in other words, it cannot be stolen). It is critical to evaluate the trustlessness of a system across both these dimensions, not only state safety.

Decentralized blockchains cannot be completely trustless; to illustrate, consider that 51% of miners in a Proof-of-Work blockchain could censor any future transaction (effectively burning censored funds) or even re-organize the history from genesis to steal all funds. Therefore we measure trustlessness as _the assumptions under which_ a system is trustless. As an example, if we assume 51% of miners are honest, then a blockchain is trustless.

**Permissionless** A system is permissionless if it requires no permission _from inside the system_ to being participating. It is permissioned otherwise.

**Decentralization** While commonly (and incorrectly) described as "the number of nodes," decentralization is measured as [the cost to run a fully validating node](https://www.truthcoin.info/blog/measuring-decentralization/). While permissionlessness is a necessary property for decentralization, it does not otherwise provide a metric for measuring decentralization. _Note:_ this definition is actually [missing a very important detail](#zk-rollups), but will suffice for now.

**Scalability and Throughput** Often a point of contention an confusion, scalability is front-and-center as the most obvious problem for contemporary blockchains. First, _throughput_ is the transaction throughput of the system, measured in transactions per second. This is often the metric incorrectly advertized as scalability. _Scalability_ is [the ratio of throughput to full node cost](https://twitter.com/_prestwich/status/1284174486674083840) for fixed trustlessness assumptions. In other words, comparing transactions per second between two systems without simultaneously comparing their costs and trust assumptions is misguided. It is trivial to increase throughput by simply increasing the cost to run a full node, or by assuming that some set of actors are honest (i.e. an additional trust assumption), but neither of those are an increase to scalability.

**Performance and Efficiency** For layer-2 systems, we can define two additional terms. _Performance_ is the ratio of throughput to full node cost (i.e. a metric of off-chain costs) while _efficiency_ is the ratio of throughput to gas usage (i.e. a metric of on-chain costs). Scalability can be considered as an aggregate of performance and efficiency.

### Desiderata

In order to be a "good" layer-2 scaling solution, we desire the following properties:
1. The system must have equal or almost-equal security to the main chain. Non-trivial trade-offs in security are unacceptable from a scaling solution.
1. The system must be trust-minimized. Adding meaningful trust assumptions, similar to reducing security, is unacceptable.
1. The system should be permissionless. This is not a hard requirement, so long as the system is trustless, but it highly desired.
1. The system must be as decentralized as the main chain. This means node costs should not be meaningfully higher.
1. The system must be more scalable than the main chain. In other words, while being trust-minimized and as decentralized as the main chain, the system must have a higher throughput.
1. Additional desiderata include:
    - No need for hot keys
    - Backups support
    - No novel cryptography
    - Capital efficient
    - Low latency
    - Generalizability/expressivity

Channels
---

https://en.bitcoin.it/wiki/Payment_channels
https://www.jeffcoleman.ca/state-channels

### Channel Networks

https://en.bitcoin.it/wiki/Lightning_Network

Sidechains
---

https://blockstream.com/sidechains.pdf

Plasma
---

https://plasma.io/plasma.pdf

### Plasma MVP

https://ethresear.ch/t/minimal-viable-plasma/426

### Plasma Cash

https://ethresear.ch/t/plasma-cash-plasma-with-much-less-per-user-data-checking/1298
[Lower Bounds for Off-Chain Protocols: Exploring the Limits of Plasma](https://eprint.iacr.org/2020/175)

### Validium

https://ethresear.ch/t/why-do-dont-we-need-two-phase-sends-plus-confirmation/1866
Validium Cash with confirmation signatures (like channels, must have hot keys)

Rollups
---

https://medium.com/@adlerjohn/the-why-s-of-optimistic-rollup-7c6a22cbb61a

https://ethresear.ch/t/against-proof-of-stake-for-zk-op-rollup-leader-election/7698

https://ethresear.ch/t/spam-resistant-block-creator-selection-via-burn-auction/5851

### ZK Rollups

https://github.com/barryWhiteHat/roll_up

https://ethresear.ch/t/on-chain-scaling-to-potentially-500-tx-sec-through-mass-tx-validation/3477

### Optimistic Rollups

https://ethresear.ch/t/minimal-viable-merged-consensus/5617

#### Interactive Verification Games

https://www.usenix.org/system/files/conference/usenixsecurity18/sec18-kalodner.pdf

