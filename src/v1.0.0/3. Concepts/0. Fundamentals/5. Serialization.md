# Fuel transaction serialization

The serialization format of a Fuel transaction follows the EIP712 specification for typed (semi-)structured objects.

## encodeTypes

`Input(uint8 type,uint8 witnessReference)`

`InputDeposit(uint8 type,uint8 witnessReference,address owner)`

`InputHTLC(uint8 type,uint8 witnessReference,bytes32 preImage)`

`Output(uint8 type,uint8 tokenLength,bytes1[] token,uint8 amountShift,uint8 amountLength,uint8 amount,uint8 ownerLength,bytes1[] owner)`

`OutputHTLC(uint8 type,uint8 tokenLength,bytes1[] token,uint8 amountShift,uint8 amountLength,uint8[] amount,uint8 ownerLength,bytes1[] owner,bytes32 digest,uint32 expiry,uint8 returnOwnerLength,bytes1[] returnOwner)`

`OutputReturn(uint8 type,uint16 dataLength,bytes1[] data)`

`UTXO (bytes32 transactionId,uint256 outputIndex,uint256 outputType,bytes32 owner,uint256 amount,uint256 token,bytes32 digest,uint256 expiry,bytes32 returnOwner)`

`Metadata(uint32 blockHeight,uint8 rootIndex,uint16 transactionIndex,uint8 outputIndex)`

`MetadataDeposit(uint32 token,uint32 blockNumber)`

There is no explicit Witness type, only its sub-types of Signature, Caller, and  Producer.

`Signature(uint8 type,bytes32 r,bytes32 s,uint8 v)`

`Caller(uint8 type,address owner,uint32 blockNumber)`

`Producer(uint8 type,bytes32 hash)`

`TransactionProof(address blockProducer,bytes32 previousBlockHash,uint256 blockHeight,uint256 blockNumber,uint256 numTokens,uint256 numAddresses,uint16 rootsLength,bytes32[] roots,address rootProducer,bytes32 merkleTreeRoot,bytes32 commitmentHash,uint256 rootLength,uint256 feeToken,uint256 fee,uint16 rootIndex,uint16 merkleProofLength,bytes32[] merkleProof,uint8 input,uint8 output,uint16 transactionIndex,uint16 transactionLength,bytes1[] transaction,uint8 dataLength,bytes32[] data,uint256 signatureFeeToken,uint256 signatureFee,address token,address selector)`

`TransactionLeaf (uint16 length,uint8 metadataLength,bytes8[] metadata,uint16 witnessesLength,bytes1[] witnesses,uint16 inputsLength,bytes1[] inputs,uint16 outputsLength,bytes1[] outputs)`

## TODO

* encode data for each of the types
* check that all types relevant for Transaction are represented above
